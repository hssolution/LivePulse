---
description: Supabase DB Reset 후 사용자 시드 실행 규칙
globs: ["supabase/**", "scripts/**"]
alwaysApply: true
---

# Supabase DB Reset 후 필수 작업

## 규칙

`npx supabase db reset` 실행 후에는 **반드시** 다음 명령어를 실행해야 합니다:

```bash
node scripts/seed-users.js
```

## 이유

- Supabase Auth(GoTrue)는 **Argon2** 해싱을 사용
- PostgreSQL의 `crypt()` 함수는 **bcrypt**만 지원
- 따라서 SQL seed 파일로는 `auth.users` 테이블에 사용자를 생성할 수 없음
- Node.js 스크립트가 Admin API를 통해 사용자를 생성함

## 생성되는 테스트 계정

| 이메일 | 역할 | 타입 |
|--------|------|------|
| lhscj2466@gmail.com | admin | admin |
| user01@gmail.com | user | user |
| user02@gmail.com | user | user |
| user03@gmail.com | user | user |

**비밀번호**: `l6882466!`

## 전체 초기화 순서

```bash
# 1. DB 리셋 (마이그레이션 + SQL 시드)
npx supabase db reset

# 2. 사용자 시드 (필수!)
node scripts/seed-users.js
```
